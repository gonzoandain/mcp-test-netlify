# Milestone v1.1: LLM-Friendly Tools

**Status:** SHIPPED 2026-02-05
**Phases:** 3-4
**Total Plans:** 5

## Overview

Transform client selection from X-Client-ID header routing to clientId tool parameters. Phase 3 adds clientId as first parameter to all tools plus a list_clients discovery tool. Phase 4 removes the now-redundant header routing infrastructure. Result: tools directly usable by LLMs without header configuration.

## Phases

### Phase 3: Tool Parameters and Discovery

**Goal:** Tools accept clientId as parameter, LLMs can discover available clients
**Depends on:** Phase 2 (multi-tenant routing - provides config infrastructure)
**Requirements:** TOOL-01, TOOL-02, TOOL-03, DISC-01, DISC-02

**Success Criteria:**
1. Every tool call with valid clientId executes against that client's API
2. Tool call with unknown clientId returns clear error naming the invalid ID
3. LLM can call list_clients to see all available client IDs
4. list_clients response includes client names when configured

Plans:
- [x] 03-01-PLAN.md — Infrastructure: types, validation helper
- [x] 03-02-PLAN.md — Tool refactor: add clientId to all tools
- [x] 03-03-PLAN.md — Discovery: list_clients tool, single server

### Phase 4: Header Routing Cleanup

**Goal:** Remove legacy header-based routing, single server handles all clients
**Depends on:** Phase 3 (tools must work without headers first)
**Requirements:** CLEN-01, CLEN-02, CLEN-03, CLEN-04

**Success Criteria:**
1. Request without X-Client-ID header no longer returns 403
2. Server instance shared across all clients (no per-client caching)
3. routing.ts file deleted from src/
4. cache.ts file deleted from src/

Plans:
- [x] 04-01-PLAN.md — Delete legacy files: routing.ts, cache.ts
- [x] 04-02-PLAN.md — Add deprecation warning, update README

---

## Milestone Summary

**Key Decisions:**
- Use isError: true for business logic errors (not JSON-RPC protocol errors)
- Error messages include valid client IDs for LLM self-correction
- Single MCP server instance serves all clients (tools validate clientId internally)
- httpJson extracted to standalone module accepting config as first parameter
- Warning injected into MCP response content array, visible to LLM

**Issues Resolved:**
- LLMs can now discover and select clients without HTTP header configuration
- Error messages guide LLM users to discovery workflow
- Single server instance simplifies architecture

**Issues Deferred:**
None

**Technical Debt Incurred:**
None

---

*For current project status, see .planning/ROADMAP.md (if next milestone exists)*
*Archived: 2026-02-05 as part of v1.1 milestone completion*
